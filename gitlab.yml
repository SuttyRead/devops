#apiVersion: v1
#kind: Namespace
#metadata:
#  name: gitlab
#
#---
#
#apiVersion: apps/v1
#kind: Deployment
#metadata:
#  name: gitlab-ce-deployment
#  namespace: gitlab
#spec:
#  replicas: 1
#  selector:
#    matchLabels:
#      app: gitlab-ce
#  template:
#    metadata:
#      labels:
#        app: gitlab-ce
#    spec:
#      containers:
#        - name: gitlab-ce
#          image: gitlab/gitlab-ce:latest
#          ports:
#            - containerPort: 80
#            - containerPort: 22 # Порт для SSH
#          env:
#            - name: GITLAB_OMNIBUS_CONFIG
#              value: |
#                external_url 'http://gitlab.suttyread.link'
#                gitlab_rails['gitlab_shell_ssh_port'] = 22
#                # Інші конфігурації...
#
#---
#
#apiVersion: v1
#kind: Service
#metadata:
#  name: gitlab-ce-service
#  namespace: gitlab
#spec:
#  selector:
#    app: gitlab-ce
#  ports:
#    - name: http
#      protocol: TCP
#      port: 80
#      targetPort: 80
#    - name: ssh
#      protocol: TCP
#      port: 22
#      targetPort: 22
#
#---
#
#apiVersion: networking.k8s.io/v1
#kind: Ingress
#metadata:
#  name: gitlab-ce-ingress
#  namespace: gitlab
#spec:
#  rules:
#    - host: gitlab.suttyread.link
#      http:
#        paths:
#          - pathType: Prefix
#            path: "/"
#            backend:
#              service:
#                name: gitlab-ce-service
#                port:
#                  number: 80
#
#---
#
## Вам потрібно включити Traefik IngressRouteTCP для SSH
#apiVersion: traefik.containo.us/v1alpha1
#kind: IngressRouteTCP
#metadata:
#  name: gitlab-ssh
#  namespace: gitlab
#spec:
#  entryPoints:
#    - ssh
#  routes:
#    - match: HostSNI(`*`)
#      services:
#        - name: gitlab-ce-service
#          port: 22
#
#
## gitlab-rake 'gitlab:password:reset[root]'